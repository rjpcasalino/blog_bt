<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#ffffff">
    
<title>~vexhack/boringtranquility: assets/imgs/food_basket.png - sourcehut git</title>

    
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QIGCC8n92KyhQAAAj1QTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////anIwUQAAAL50Uk5TAAECAwQFBgcICQoLDA4PEBESExQVFhcYGRobHB0eHyAhIyQmJygpKistLzAzNDU2Nzg5Ozw9QEFDREZHSElLTE1OT1BRVFdYWVpbXF1eX2BhZGZnaGltbnBxdHV3eHp7fn+AgYKDhIWGh4iJio2TlJucnqGio6Smp6ipqqusrbCxsrO0tre4ury9vr/Cw8TFxsfIycrMzc7P0dLT1dbY2dvf4OLj5OXm5+jq6+zt7u/w8fL09fb3+Pn6+/z9/gNzyOkAAAABYktHRL6k3IPDAAAFwUlEQVQYGe3B+VtUVQAG4G9i0TQZZyA1S0JxydzDNFTUqXBfcylzS8UE21TMyjAQUQnFEi0BHQU3cAc0UGbm+9v65Zw7y70zc++dc3qenof3xZAhQ4b8T+V/uGn/kdrm1psdHTdbm2uP7Ns434//yLD5e+u7aOH+6T0ludBszGf1L5jC87rNBdDm9XXnw0wrfG71cOhQ9N0z2vTk20Ko9t5PYToQOj4FKr17IkKHwtUToMobVQN0of/rkVDik7t06c5yZC7/V1rqajq6f9vKQFlZYNW2A0cvdNPSL35kaPEDmgxerFiSjwQFZQebQzTpKkUmsg4xUX/Nijwk4V15aoAJIhVZcM13ngnatuQhJe/WNiY464VLE28xXsMCD9LyLDzLeMEiuDLzIeM0zIRNs88xTvcMuFDSx1htC+FA6XXG6pkLx0qeM8aLHdlwJGfnP4zRNw8OzexjjOaJcGzSn4zR8z4cmfiQUZF9WXAhuyLCqO4iOOC7xahni+BSWQ+jgl7YlnWeUR3FcG1qJ6MasmDXIUZdexMZGNvGqAOwaTGjrnqREd/fNERKYUvBAxqueZEhXzsNXX7Y8SsNHW8iY+M6afgZNnxKw7NiKDCtl4YA0nrjHqXIIiixjIY7I5FOFQ37oEglDZVIo+glpeYsKJJ9mdJAIVI7QenFRChT3E+pGim9F6G0AwrtohSeglR+otSWDYVygpSqkUJRmNJCKLWEUmgCkvuOUgPU8vxO6TCSev0ZpZlQ7ANKj4YhmXWUGqBcI6UVSOY8pQVQbhGlM0hiTJhCmwfKeW5QCPlh7TNKW6DBdkobYa2eQn8eNPC9pPAbLA17QaEGWtRS6MuBlfmUVkCLtZTmwspeCoN50MIXprATVuopXIQmLRROwUoXhQpoUkXhNizkU1oCTZZRyoPZh5Tyock4SnNgtolCF3TxPKKwBmb7KTRBm0sUdsPsCIWj0OY4hR9gVkthP7SppHASZs0UtkGbLyg0wqyVwkpos4FCC8xuUghAm3IK7TDroFAGbQIUgjDroFAGbQIUgjC7SSEAbcoptMOslcIqaLOBQgvMmilsgzY7KDTCrJbCAWhTReEkzI5QOAptfqTwPcz2UbgAbS5R2AWzjRS6oYvnMYXVMJtPqQCavEVpNsz8lMqgyXJKo2DhPoWD0OQwhU5YOU2hGZpcoVADK3sohLzQwh+h8CWslFBaCS3WUZoDK7nPKZyCFnUUerNh6TSFAS808L+iUANrmylthQafU1oPawVhCm0eKOcJUhgcjSTOUVoI5RZTqkMyqymdhXJNlMqRzPAnlGZDsRJKD3OR1LeUzkEtTxOlSiRXGKL0EZRaSmlwPFI4Tul6DhTKvUXpGFKZEqa0EwrtoRQqRkrVlP6ZBGUmD1A6htQm9FP6IxuK5Fyl1P8O0viahgoo8g0NB5HOyDuUImVQ4mMabo9AWgEaeqZCgel9NCyFDb/Q0DkWGXv7Lg0nYIe/i4Y2HzKUf4OGe6NhS2mEhr98yEh+Kw3hBbCpglHt45CB8TcY9RXsyjrLqM5pcG36XUadfg22eYOM6l0Glz7uY9T1UXCg6AFjHMqGCznfMMb9Qjgyo4cxLhfDsclXGePpdDg0r48x+nflwJHcPQOM0TsLjs3rYazgEtjnWXqLsZ7Oggszuhnn9w9gU0kT49yfDleKgozXuMiDtDyLmxjveiFc8jYwwY3tPqTk/zzIBPWj4FpWRYQJXtau9SEJ/7q6V0wQ/uo1ZKK0iybhlqplYxHP89byw1ciNLm3ABny/0xLjy4dr/xiQ3kgUL5hR9WPlx7T0onRyFzgDl26vRRKjKwcoAv9B0dAlcLqMB0KH3sHKk2pDtGBwWPFUG3C4Ue06WHleOgwbMWZENMarCvPhTb+jb/1MYXemvWjoVnO3J2nbtNCZ82Xc7LxH8mbs2b3DycbW9qDwfaWxpPf71o9exSGDBky5P/pX9F6dsCMuJp+AAAAAElFTkSuQmCC" />
    
    
    <link rel="stylesheet" href="/static/main.min.8e21eea9.css">
    
    


<meta name="go-import"
  content="git.sr.ht/~vexhack/boringtranquility git https://git.sr.ht/~vexhack/boringtranquility">

  </head>
  <body>
    
<nav class="navbar navbar-light navbar-expand-sm">
  <a class="navbar-brand" href="/">
  sourcehut
  <span class="text-danger">git</span>
</a>
<ul class="navbar-nav mr-auto d-none d-sm-flex">
  
  <li class="nav-item active">
    <a
      class="nav-link"
      href="https://git.sr.ht"
    >git</a>
  </li>
  
  <li class="nav-item ">
    <a
      class="nav-link"
      href="https://builds.sr.ht"
    >builds</a>
  </li>
  
  <li class="nav-item ">
    <a
      class="nav-link"
      href="https://todo.sr.ht"
    >todo</a>
  </li>
  
  <li class="nav-item ">
    <a
      class="nav-link"
      href="https://lists.sr.ht"
    >lists</a>
  </li>
  
  <li class="nav-item ">
    <a
      class="nav-link"
      href="https://man.sr.ht"
    >man</a>
  </li>
  
  <li class="nav-item ">
    <a
      class="nav-link"
      href="https://dispatch.sr.ht"
    >dispatch</a>
  </li>
  
  <li class="nav-item ">
    <a
      class="nav-link"
      href="https://meta.sr.ht"
    >meta</a>
  </li>
  
</ul>
<div class="login">
  
  <span class="navbar-text">
    
    <a href="https://meta.sr.ht/oauth/authorize?client_id=25ff6e5ce60d7345&amp;scopes=profile,keys,b99a95de3e69c958/jobs:write&amp;state=%2F%7Evexhack%2Fboringtranquility%2Ftree%2Fmaster%2Fassets%2Fimgs%2Ffood_basket.png%3F" rel="nofollow">Log in</a>
    &mdash;
    <a href="https://meta.sr.ht">Register</a>
    
  </span>
  
</div>
</nav>

    
<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 header-tabbed">
      <h2>
        <a href="/%7Evexhack/"
        >~vexhack</a>/boringtranquility
      </h2>
      
      
      <ul class="nav nav-tabs">
        <li class="nav-item">
          
      <a
        class="nav-link "
        href="/~vexhack/boringtranquility">summary</a>
      
        </li>
        <li class="nav-item">
          
      <a
        class="nav-link active"
        href="/~vexhack/boringtranquility/tree">tree</a>
      
        </li>
        <li class="nav-item">
          
      <a
        class="nav-link "
        href="/~vexhack/boringtranquility/log">log</a>
      
        </li>
        <li class="nav-item">
          
      <a
        class="nav-link "
        href="/~vexhack/boringtranquility/refs">refs</a>
      
        </li>
        <li class="nav-item">
          
      <a
        class="nav-link "
        href="/~vexhack/boringtranquility/contributors">contributors</a>
      
        </li>
        
        
      </ul>
      
    </div>
  </div>
</div>

<style>
pre {
  tab-size: 8
}
pre, body {
  padding-bottom: 0;
  margin-bottom: 0;
}
</style>
<div class="header-extension" style="margin-bottom: 0;">
  <div class="container-fluid">
    <span style="padding-left: 1rem">
      



<a href="/~vexhack/boringtranquility/tree/master"
>boringtranquility</a>/<a
    href="/~vexhack/boringtranquility/tree/master/assets"
  >assets</a>/<a
    href="/~vexhack/boringtranquility/tree/master/assets/imgs"
  >imgs</a>/food_basket.png

      <span class="text-muted" style="margin-left: 1rem">
        <span title="100644">
          -rw-r--r--
        </span>
      </span>
      <span class="text-muted" style="margin-left: 1rem">
        <span title="81976 bytes">
          80.1 KiB
        </span>
      </span>
      <span class="text-muted" style="margin-left: 1rem">
        <a href="/~vexhack/boringtranquility/blob/master/assets/imgs/food_basket.png">
          View raw
        </a>
      </span>
    </span>
    
  </div>
</div>
<div class="container-fluid" style="padding-left: 0; padding-right: 0;">
  
  <div class="row" style="margin-right: 0;">
    
    <div class="col-md-12">
      <div style="padding: 1rem">
        <p>
          <span title="81976 bytes">
            80.1 KiB
          </span>
          binary file not shown.
        </p>
        <p>
          <a href="/~vexhack/boringtranquility/blob/master/assets/imgs/food_basket.png" class="btn btn-primary">
            Download <span class="icon icon-caret-right "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"/></svg>
</span>
          </a>
        </p>
      </div>
    </div>
    
</div>


    
    
<script type="text/javascript">

/**
 * Matches URL hash selecting one or more lines:
 * - #L10           - single line
 * - #L10,20        - multiple lines
 * - #L10-15        - span of lines
 * - #L10-15,20-25  - multiple spans
 * - #L10,15-20,30  - combination of above
 */
const hashPattern = /^#L(\d+(-\d+)?)(,\d+(-\d+)?)*$/;

const isValidHash = hash => hash.match(hashPattern);

const getLine = no => document.getElementById(`L${no}`);

const getLineCount = () => document.querySelectorAll('.lines > a').length;

const lineNumber = line => Number(line.id.substring(1));

function* range(start, end) {
  if (end < start) {
    [start, end] = [end, start];
  }

  for (let n = start; n <= end; n += 1) {
    yield n;
  }
}

/**
 * Given a string representation of a span returns the numbers contained in it.
 * Numbers greater than max are ignored.
 */
const parseSpan = (span, max) => {
  const [sStart, sEnd] = span.includes("-") ? span.split("-") : [span, span];
  const [start, end] = [sStart, sEnd].map(Number).sort((a, b) => a - b);

  if (start > max) {
    return [];
  } else if (end > max) {
    return range(start, max);
  } else {
    return range(start, end);
  }
}

/**
 * Returns a set of line numbers matching the hash.
 */
const lineNumbersFromHash = hash => {
  const lineCount = getLineCount();
  const lineNos = new Set();

  if (isValidHash(hash)) {
    const spans = location.hash.substring(2).split(",");
    for (let span of spans) {
      for (let no of parseSpan(span, lineCount)) {
        lineNos.add(no);
      }
    }
  }

  return lineNos;
}

/**
 * Given a set of line numbers, groups them into spans.
 * Yields tuples of [startNo, endNo].
 */
const spansFromLineNumbers = lineNos => {
  if (lineNos.size === 0) {
    return [];
  }

  const sorted = Array.from(lineNos).sort((a, b) => a - b);
  const spans = [];
  let current, prev;
  let start = sorted[0];

  for (current of sorted) {
    if (prev && current !== prev + 1) {
      spans.push([start, prev]);
      start = current;
    }
    prev = current;
  }
  spans.push([start, current]);

  return spans;
}

/**
 * Returns a hash matching the given set of line numbers.
 */
const hashFromLineNumbers = lineNos => {
  const spans = spansFromLineNumbers(lineNos);
  const parts = [];

  for ([start, end] of spans) {
    if (start == end) {
      parts.push(start);
    } else {
      parts.push([start, end].join("-"));
    }
  }

  return "#L" + parts.join(",");
}

const selectLine = lineNo => {
  const line = getLine(lineNo);
  if (line) {
    line.classList.add("selected");
  }
}

const selectLines = lineNos => {
  for (lineNo of lineNos) {
    selectLine(lineNo);
  }
}

const unselectLine = lineNo => {
  const line = getLine(lineNo);
  if (line) {
    line.classList.remove("selected");
  }
}

const unselectAll = () => {
  const selected = document.querySelectorAll(".lines .selected");
  for (let line of selected) {
    line.classList.remove("selected");
  }
}

const handlePlainClick = (selected, lineNo) => {
  selected.clear();
  selected.add(lineNo);
  unselectAll();
  selectLine(lineNo);
}

const handleCtrlClick = (selected, lineNo) => {
  if (selected.has(lineNo)) {
    selected.delete(lineNo);
    unselectLine(lineNo);
  } else {
    selected.add(lineNo);
    selectLine(lineNo);
  }
}

const handleShiftClick = (selected, lineNo, lastNo) => {
  if (lastNo) {
    for (no of range(lastNo, lineNo)) {
      selected.add(no);
      selectLine(no);
    }
  }
}

/**
 * Scroll the selected lines into view.
 */
const scrollToSelected = (selected) => {
  if (selected.size > 0) {
    const firstNo = Math.min(...selected);
    const scrollNo = Math.max(firstNo - 5, 1);  // add top padding
    const line = getLine(scrollNo);
    if (line) {
      line.scrollIntoView();
    }
  }
}

/**
 * Returns true if two sets contain the same elements.
 */
const setsEqual = (a, b) => {
  if (a.size != b.size) {
    return false;
  }
  for (n of a) {
    if (!b.has(n)) {
      return false;
    }
  }
  return true;
}

/**
 * A set of currently selected line numbers.
 */
let selected = lineNumbersFromHash(location.hash);

/**
 * The number of the last line to be clicked. Used to select spans of lines.
 * If a single line is selected initially, set to that line.
 */
let lastNo = selected.size == 1 ? Array.from(selected)[0] : null;

/**
 * Overrides default click handler for line numbers.
 */
const handleLineClicked = event => {
  event.preventDefault();

  const lineNo = lineNumber(event.target);
  if (event.ctrlKey) {
    handleCtrlClick(selected, lineNo);
  } else if (event.shiftKey) {
    handleShiftClick(selected, lineNo, lastNo);
  } else {
    handlePlainClick(selected, lineNo);
  }

  lastNo = lineNo;

  const hash = hashFromLineNumbers(selected);
  if (hash) {
    window.location.hash = hash;
  } else {
    // Hacky way to clear the hash (https://stackoverflow.com/a/15323220)
    history.pushState('', document.title, window.location.pathname);
  }
}

// Catch when the hash is changed from the outside and update the selection
// e.g. when the user edits the hash in the URL
window.onhashchange = () => {
  let newSelected = lineNumbersFromHash(location.hash);
  if (!setsEqual(selected, newSelected)) {
    selected = newSelected;
    unselectAll();
    selectLines(selected);
  }
}

document.querySelectorAll('.lines a').forEach(
  line => line.addEventListener("click", handleLineClicked)
);

// Initially select lines matching hash and scroll them into view
selectLines(selected);
scrollToSelected(selected);
</script>

  </body>
</html>